<!DOCTYPE html>
<html>
<head>
   <meta charset="utf-8">
   <link rel="icon" href="img/logo64.png">
   <link rel="stylesheet" type="text/css" href="style.css">
   <link rel="stylesheet" href="highlight/matlab.css">
   <script src="highlight/highlight.pack.js"></script>
   <script>hljs.initHighlightingOnLoad();</script>
   <title>Saving Fit</title>
</head>

<body>

<header>
<ul>
<li><img src="img/logo64.png", width="80%">
<li class="header-title">Hyscorean
</ul>
<p>
<br>
<ul>
<li><a href="index.html">Documentation</a>
<li><a href="references.html">Publications</a>
<li><a href="https://bitbucket.org/luisfabib/hyscorean/src/master/" target="_blank">Repository</a>
<li><a href="https://bitbucket.org/luisfabib/hyscorean/issues?status=new&status=open" target="_blank">Report Issues</a>
</ul>
<br>
<br>
<ul> 
</ul>
</p>
</header>

<section>

<hr>
<div class="functitle">Saving the Fit Results</div>
<hr>

<p>
If the user finds the current fit of the spectrum satisfactory, wants to save the current parameters for later or use them as starting point for another fitting round, the current parameter set under the best column can be stored for later use via the <code>Save parameter set</code> under the <code>Start/Stop</code> button. Doing this will update the <code>Parameter sets</code> panel with the newly saved parameter set. The sets are named according to their total RMSD value.
</p>

<center>
<img src= "img/savingfit1.png",  width="90%", class="center">
</center>

<p>
Once several sets have been saved, these can be displayed in the <code>Parameter</code> table and their corresponding spectrum by just clicking their names in the <code>Parameter sets</code> panel.
</p>

<center>
<img src= "img/savingfit2.png",  width="90%", class="center">
</center>

<p>
The <code>Parameter sets</code> panel also possesses a set of buttons with the same functionalities as in EasySpin:
</p>
<ul>
<li> <code>rmsd</code> <br>
Sorts the saved parameter sets by in the <code>Parameter sets</code> panel by increasing RMSD value.
<li> <code>id</code> <br>
Sorts the saved parameter sets by in the <code>Parameter sets</code> panel by order of creation.
<li> <code>delete</code> <br>
Removes the selected parameter set from the panel.	
<li> <code>export</code> <br>
Saves the selected parameter set to the MATLAB workspace as a structure variable with name fit# and the following fields:
<pre class="matlab">
.rmsd       % Total RMSD of the parameter set
.fitSpec    % Cell array of fitted spectra
.expSpec    % Cell array of experimental spectra
.residuals  % Cell array of residuals 
.bestValues % Array of the parameter values in the best column 
.Sys        % Structure with spin system definition
.ID         % ID of the parameter set</pre>
</ul>

<p>
Any fit done via the <code>Manual single run</code> method can be saved as well. By doing so, the parameters in the <code>center</code> column (the values used for the manual fit) will be transferred to the <code>best</code> column and saved. Note that once the parameter sets are loaded these will be overwritten in the <code>best</code> and not in the <code>center</code> column. The user must adapt the <code>center</code> values manually.
</p>

<p>
An exact copy of the current display in the fitting module can at all times be detached via the <code>detach</code> button in the upper-right corner of the display. From the detached figure, the display can be saved and/or exported via the MATLAB interface. 
</p>

<p>
As for the processing, Hyscorean's fitting module includes a report generator to keep an organized record of the fits and their results. The report can be generated by pressing the <code>Report</code> button next to the <code>Parameters</code> table in the upper-right corner of the window. 
</p>

<p>
The report contains the following:
</p>
<ul>
<li> An exact copy of the input given to EasySpin with the definitions of the <code>Sys</code> and <code>Vary</code> variables.
<li> A summary of the fitting options employed and a copy of the <code>Parameters</code> table containing the best values of the fit.
<li> For each fitted spectrum the report includes a copy of the experimental spectrum overlaid with the best fit as in the GUI. Additionally, both the experimental spectrum as the fitted spectrum are displayed separately for a better visualization.
<li> A summary of the evolution of the total RMSD as well as the RMSDs of the individual fitted spectra.
</ul>

<p>
Once the <code>Report</code> button is pressed an OS window will prompt for the user to select the name and folder under which the report is the be saved.
</p>
<!-- =========================================================== -->
<hr>
<a href="fittinggraphics.html" class="previous", align="left">&laquo; Previous</a>
&emsp;
<a href="uninstalling.html" class="next", style="text-align:right">Next &raquo;</a>
<hr>
</section>


<footer>
Hyscorean Documentation - Luis Fábregas Ibáñez  2019 - ETH Zurich - Released under the GNU Lesser General Public License (LGPL 3.0).
</footer>

</body>
</html>
